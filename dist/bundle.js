(()=>{"use strict";var e,t,r,o,n,a,s={476:(e,t,r)=>{r.d(t,{Z:()=>o});const o={isAdmin:!0,persistenceMethod:"mongodb"}},325:(e,t,r)=>{r.a(e,(async e=>{let o,n;switch(r.d(t,{D:()=>o,d:()=>n}),r(476).Z.persistenceMethod){case"json":const{default:e}=await r.e(779).then(r.bind(r,779)),{default:t}=await r.e(194).then(r.bind(r,194));o=new e,n=new t;break;case"mongodb":const{default:a}=await r.e(514).then(r.bind(r,514)),{default:s}=await r.e(419).then(r.bind(r,419));o=new a,n=new s;break;case"firebase":const{default:i}=await r.e(471).then(r.bind(r,471)),{default:d}=await r.e(240).then(r.bind(r,240));o=new i,n=new d;break;default:o=new e,n=new t}e()}),1)},944:(e,t,r)=>{r.a(e,(async e=>{r.d(t,{Z:()=>c});var o=r(860),n=r.n(o),a=r(325),s=e([a]);a=(s.then?await s:s)[0];const{Router:i}=n(),d=new i;d.get("/",(async(e,t)=>{const r=await a.D.getAll();t.json(r)})),d.get("/:id",(async(e,t)=>{const r=await a.D.getById(e.params.id);if(r)return t.send(r);t.status(404).json({error:"carrito no encontrado"})})),d.get("/:id/productos",(async(e,t)=>{const r=await a.D.getById(e.params.id);if(r)return t.send(r.products);t.status(404).json({error:"carrito no encontrado"})})),d.post("/",(async(e,t)=>{const r=await a.D.save({products:[]});t.status(201).json({id:r.id})})),d.delete("/:id",(async(e,t)=>{const r=await a.D.getById(e.params.id);r||t.status(404).json({error:"carrito no encontrado"}),a.D.deleteById(r.id),t.send("carrito eliminado")})),d.post("/:id/productos",(async(e,t)=>{const r=await a.D.getById(e.params.id);r||t.status(404).json({error:"carrito no encontrado"}),e.body.products&&e.body.products.length?(r.products=[...r.products,...e.body.products],await a.D.update(r),t.status(201).json({msg:"los productos fueron agregados al carrito"})):t.status(400).json({error:"Debe enviar una lista de productos vÃ¡lida"})})),d.delete("/:id/productos/:id_prod",(async(e,t)=>{const r=await a.D.getById(e.params.id);r||t.status(404).json({error:"carrito no encontrado"}),r.products.find((t=>t.id==e.params.id_prod))||t.status(404).json({error:"producto no encontrado en el carrito"});const o=r.products.filter((t=>t.id!=e.params.id_prod));r.products=o,await a.D.updateCart(r),t.send("producto eliminado del carrito")}));const c=d}))},540:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(860),n=r.n(o);const{Router:a}=n(),s=new a;s.get("/",(async(e,t)=>{t.json("Hola!!!!")}));const i=s},875:(e,t,r)=>{r.a(e,(async e=>{r.d(t,{Z:()=>l});var o=r(860),n=r.n(o),a=r(325),s=r(476),i=e([a]);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}a=(i.then?await i:i)[0];const{Router:u}=n(),p=new u;p.get("/",(async(e,t)=>{const r=await a.d.getAll();t.json(r)})),p.get("/:id",(async(e,t)=>{const r=await a.d.getById(e.params.id);r?t.send(r):t.status(404).json({error:"producto no encontrado"})})),p.post("/",(async(e,t)=>{if(!s.Z.isAdmin)return t.status(403).send({error:"No autorizado"});const{title:r,price:o,thumbnail:n}=e.body;if(r&&o&&n){const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.body),o=await a.d.save(r);t.status(201).send(o)}else t.status(400).send({error:"Faltan datos obligatorios"})})),p.put("/:id",(async(e,t)=>{if(!s.Z.isAdmin)return t.status(403).send({error:"No autorizado"});const r=await a.d.getById(e.params.id);r||t.status(404).json({error:"producto no encontrado"});const{title:o,price:n,thumbnail:i}=e.body;r.title=o||r.title,r.price=n||r.price,r.thumbnail=i||r.thumbnail,await a.d.update(r),t.send("producto actualizado")})),p.delete("/:id",(async(e,t)=>{if(!s.Z.isAdmin)return t.status(403).send({error:"No autorizado"});const r=await a.d.getById(e.params.id);r||t.status(404).json({error:"producto no encontrado"}),a.d.deleteById(r.id),t.send("producto eliminado")}));const l=p}))},283:(e,t,r)=>{r.a(e,(async e=>{var t=r(860),o=r.n(t),n=r(875),a=r(944),s=r(540),i=e([n,a]);[n,a]=i.then?await i:i;const d=o()(),c=process.env.PORT||8080;d.use(o().json()),d.use(o().urlencoded({extended:!0})),d.use(o().static("public")),d.use("/api/carrito",a.Z),d.use("/api/productos",n.Z),d.use("/",s.Z),d.listen(c,(()=>{console.log(`"server is running on port ${c}`)}))}))},860:e=>{e.exports=require("express")},509:e=>{e.exports=require("firebase-admin")},517:e=>{e.exports=require("lodash")},185:e=>{e.exports=require("mongoose")},828:e=>{e.exports=require("uuid")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},i={};function d(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return s[e](r,r.exports,d),r.exports}d.m=s,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o=e=>!--e.r&&e(),n=(e,t)=>e?e.push(t):o(t),d.a=(a,s,i)=>{var d,c,u,p=i&&[],l=a.exports,b=!0,y=!1,f=(t,r,o)=>{y||(y=!0,r.r+=t.length,t.map(((t,n)=>t[e](r,o))),y=!1)},w=new Promise(((e,t)=>{u=t,c=()=>(e(l),r(p),p=0)}));w[t]=l,w[e]=(e,t)=>{if(b)return o(e);d&&f(d,e,t),n(p,e),w.catch(t)},a.exports=w,s((a=>{if(!a)return c();var s,i;d=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var s=[];a.then((e=>{i[t]=e,r(s),s=0}));var i={};return i[e]=(e,t)=>(n(s,e),a.catch(t)),i}}var d={};return d[e]=e=>o(e),d[t]=a,d})))(a);var u=new Promise(((e,r)=>{(s=()=>e(i=d.map((e=>e[t])))).r=0,f(d,s,r)}));return s.r?u:i})).then(c,u),b=!1},d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((t,r)=>(d.f[r](e,t),t)),[])),d.u=e=>e+".bundle.js",d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a={143:1},d.f.require=(e,t)=>{a[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var n in t)d.o(t,n)&&(d.m[n]=t[n]);o&&o(d);for(var s=0;s<r.length;s++)a[r[s]]=1})(require("./"+d.u(e)))},d(283)})();